---
date: 2015-10-17 17:37:10 PM
title: 前端系列之 HTTP
categories: technology
---

- http 中 get 和 post；
- HTTP 格式: 方案://服务器位置/路径, `<scheme>://<user>:<password>@<host>:<port>/<path>;<params>?<query>#<frag>`

## 同源

> 如果两个页面拥有相同的**协议**（protocol），**端口**（如果指定），和**主机**，那么这两个页面就属于同一个源（origin）。

> 来自about:blank，javascript:和data:URLs中的内容，继承了将其载入的文档所指定的源，因为它们的URL本身未指定任何关于自身源的信息。

注意 IE 的区别（比如：IE未将端口号加入到同源策略的组成部分之中）。

reference: [JavaScript 的同源策略, MDN](https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy)

## 从输入URL到页面加载完成的过程

1. 输入地址
2. 浏览器查找域名的 IP 地址。这一步包括 DNS 具体的查找过程，包括：浏览器缓存->系统缓存->路由器缓存...
4. 浏览器向 web 服务器发送一个 HTTP 请求
5. 服务器的永久重定向响应（从 http://example.com 到 http://www.example.com）
6. 浏览器跟踪重定向地址
7. 服务器处理请求
8. 服务器返回一个 HTTP 响应
9. 浏览器显示 HTML
10. 浏览器发送请求获取嵌入在 HTML 中的资源（如图片、音频、视频、CSS、JS等等）
11. 浏览器发送异步请求

reference: [从输入URL到页面加载完成的过程中都发生了什么事情？, segmentfault](http://segmentfault.com/q/1010000000489803/a-1020000000489830)

## 状态码

| 整体范围       | 已定义范围     | 分类  |
|:-------------:|:-------------:| :-----|
| 100 ~ 199     | 100 ~ 101   | 信息提示 |
| 200 ~ 299     | 200 ~ 206   | 成功 |
| 300 ~ 399     | 300 ~ 305   | 重定向 |
| 400 ~ 499     | 400 ~ 415   | 客户端错误 |
| 500 ~ 599     | 500 ~ 505   | 服务器错误 |
{:class="table"}

| 状态码 | 原因短语     | 含义 |
| :-------------: | :------------- |:------------- |
| 100 | Continue      | 说明收到了请求的初始部分, 轻客户端继续. 发送了这个状态码之后，服务器在收到请求之后必须进行响应。 |
| 101 | Switching Protocols | 说明服务器正在根据客户端的指定，将协议切换成 Update 首部所列的协议 |
| 200 | OK | 请求没问题，实体的主体部分包含了所请求的资源 |
| 201 | Created | 用于创建服务器对象的请求(比如, PUT)。响应的实体主体部分中应该包含各种引用了已创建的资源 URL, Location 首部包含的则是最具体的引用。 |
| 202 | Accepted | 请求已被接受，但服务器还未对其执行任何动作。不能保证服务器会完成这个请求; 这只是意味着接收请求时, 他看起来是有效的，服务器应该在实体的主体中包含对请求状态的描述，或许还应该有队请求完成时间的估计 |
| 203 | Non-Authoritative Information | 实体首部包含的信息不是来自于源服务器，二是来自资源的一份副本。如果中间节点上有一份资源副本，但无法或者没有对它所发送的与资源有关的元星系进行验证，就会出现这种情况。
| 204 | No Content | 响应报文中包含若干首部和一个状态行，但没有实体的主体部分。主要用于在浏览器不转为显示新文档的情况下，对其进行更新 |
| 205 | Reset Content | 另一个主要用于浏览器的代码。负责告知浏览器清除当前页面中的所有 HTML 表单元素 |
| 206 | Partial Content | 成功执行了一个部分或 Range 请求。 |
| 300 | Multiple Choices | 客户端请求一个实际指向多个资源的 URL 时会返回这个状态码，比如服务器上有某个 HTML 文档的英语和法语版本。|
| 301 | Moved Permanently | 在请求的 URL 已被移除时使用。响应的 Location 首部中应该包含资源现在所处的 URL |
| 302 | Found | 与 301 状态码类似; 但是，客户端应该使用 Location 首部给出的 URL 来临时定位资源。将来的请求仍使用老的 URL |
| 303 | See Other | 告知客户端应该用另外一个 URL 来获取资源。新的 URL 位于响应报文的 Location 首部。其主要目的是允许 POST 请求的响应将客户端丁香到某个资源上去 |
| 304 | Not Modified | 客户端可以通过所包含的请求首部，使其请求变成有条件的。如果客户端发起了一个GET请求，而最近资源未被修改的话，就可以用这个状态码来说明资源未被修改。带有这个状态码的响应不应该包含实体的主体部分。|
| 305 | Use Proxy | 用来说明必须通过一个代理来访问资源; 代理的位置有location首部给出。很重要的一点是，客户端是相对某一个特定的资源来解析这条响应的，不能假定所有请求，甚至所有持有所请求资源的服务器的请求都通过这个代理进行。如果客户端错误的让代理介入了某条请求，可能会引发破坏性的行为，而且会造成安全漏洞。 |
| 306 | (未使用) | 当前未使用 |
| 307 | Temporary Redirect | 与 301 状态码类似; 但客户端应该使用 Location 首部给出 URL 来临时定位资源。将来的请求应该使用老的 URL |
| 400 | Bad Request | 用于告知客户端它发送了一个错误的请求 |
| 401 | Unauthorized | 与适当的首部一起返回，在这些首部中请求客户端在获取对资源的访问权之前，对自己进行认证。|
| 402 | Payment Required | 现在这个状态码还未使用，但已经被保留，一做未来之用 |
| 403 | Forbidden | 用于说明请求被服务器拒绝了。如果服务器想说明为什么拒绝请求，可以包含实体的主体部分来对原因进行描述。但这个状态码通常是在服务器不想说明拒绝原因的使用使用的。|
| 404 | Not Found | 用于说明服务器无法找到所请求的url。通常会包含一个实体一般客户端应用程序显示给用户看。|
| 405 | Mehtod Not Allowed | 发起的请求中带有所请求的url不支持的方法时，使用此状态码。应该在响应中包含Allow首部，已告知客户端对所请求的的资源可以使用哪些方法。|
| 406 | Not Acceptable | 客户端可以指定参数来说明他们愿意接收什么类型的实体。服务器没有与客户端可以接受的url相匹配的资源时，使用此代码。通常服务器会包含一些首部，以便客户端弄清楚为什么请求无法得到满足。|
| 407 | Proxy Authentication Required | 与401类似，但用于要求对资源进行认证的代理服务器。|
| 408 | Request Timeout | 如果客户端完成请求所化的时间太长，服务器可以回送此状态码，并关闭连接。超时时常随服务器的设置不同而不同，但通常对所有的合法请求来说，都是够长的。|
| 409 | Confict | 用于说明请求可能在资源上引发一些冲突。服务器担心会引发一些冲突时，可以发送此状态码。响应中应该包含描述冲突的主体。|
| 410 | Gone | 与 404 类似，只是服务器曾经拥有过此资源。主要用于 Web 站点的维护，这样服务器的管理者就可以在资源被移除的情况下通知客户端了。|
| 411 | Length Required | 服务器要求在请求报文中包含Content-Length首部时使用。|
| 412 | Precondition Failed | 客户端发起了条件请求，且其中一个条件失败了的时候使用。
| 413 | Request Entity Too Large | 客户端所发送请求中的请求url比服务器能够或者希望处理的要大时，使用此状态码。|
| 414 | Request Uri Too Long | 客户端所发送请求中的请求url比服务器能够或者希望处理的要长时，使用此状态码。|
| 415 | Unsupported Media Type | 服务器无法理解或无法支持客户端所发实体的内容类型时，使用此状态码。|
| 416 | Requested Range Not Satisfiable | 请求报文所请求的是指定资源的某个范围，而此范围无效或无法满足时，使用此状态码 |
| 417 | Expectation Failed | 请求的Expect请求首部包含了一个期望，但服务器无法满足此期望时，使用此状态码 |
| 500 | Internal Server Error | 服务器遇到了一个妨碍它为请求提供服务的错误时，使用此状态码 |
| 501 | Not Implemented | 客户端发起的请求超出服务器的能力范围时比如使用了服务器不支持的请求方法)，使用此状态码 |
| 502 | Bad Gateway | 作为代理或网关使用的服务器从请求响应链的链路上收到了一条伪响应(比如，它无法连接到其父网关)时，使用此状态码 |
| 503 | Service Unavailable | 用来说明服务器现在无法为请求提供服务，当将来可以。如果服务器知道什么时候资源会变为可使用的，可以在响应中包含一个Retry-After首部。|
| 504 | Gateway Timeout | 与状态码408类似，只是这里的响应来自一个网关或代理，他们在等待另一个服务器对其请求进行相应是超时了 |
| 505 | http Version Not Supported | 服务器收到的请求使用了它无法或不愿支持的协议版本时，使用此状态码。有些服务器应用程序会选择不支持协议的早期版本 |
{:class="table"}